<div class="container mt-4">
  <div class="row">
    <h1 class="text-center">Selecione os Produtos para o Serviço #{{servicoId}}</h1>
    <div class="text-center mb-3">
      <button class="btn btn-info btn-sm" (click)="verificarAssociacoes()">
        <i class="bi bi-search"></i> Verificar associações salvas
      </button>
    </div>
    @if(produtosOriginal.length > 0 || produtosSelecionados.length > 0){
      <div class="col">
        <h2 class="text-center">Produtos Disponíveis</h2>
        <div cdkDropList id="produtosOriginal"
             (cdkDropListDropped)="dropped($event, false)"
             [cdkDropListData]="produtosOriginal"
             class="lista"
             [cdkDropListConnectedTo]="['produtosSelecionados']">
          <div *ngFor="let produto of produtosOriginal" cdkDrag class="item">{{ produto.nome }}</div>
        </div>
      </div>
      <div class="col">
        <h2 class="text-center">Produtos Selecionados</h2>
        <div cdkDropList id="produtosSelecionados"
             [cdkDropListData]="produtosSelecionados"
             (cdkDropListDropped)="dropped($event, true)"
             class="lista"
             [cdkDropListConnectedTo]="['produtosOriginal']">
          <div *ngFor="let produto of produtosSelecionados" class="item" cdkDrag (click)="editarQuantidade(produto)" title="Clique para editar a quantidade">
            {{ produto.nome }}
            @if(getQuantidade(produto.id) != null){
              <span class="badge bg-secondary ms-2">x{{ getQuantidade(produto.id) }}</span>
            }
          </div>
        </div>
      </div>
    }@else {
      <h1 class="text-center">Não há produtos cadastrados!</h1>
    }
  </div>
</div>
